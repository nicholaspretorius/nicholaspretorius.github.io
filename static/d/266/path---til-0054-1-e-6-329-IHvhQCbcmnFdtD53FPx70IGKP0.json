{"data":{"markdownRemark":{"html":"<p>Below are a few thoughts and notes on using MySQL with TypeORM.</p>\n<h4>MySQL</h4>\n<ul>\n<li>The default location for MySQL installation (on Mac) is: /usr/local/mysql</li>\n<li>If you get an error when running: <code>mysql --version</code> it likely means you do not have mysql added to your $PATH. Check this by: </li>\n<li>echo $PATH</li>\n<li>If it is not there, you will need either add it to your session via <code>export path=$PATH:/usr/local/mysql/bin</code></li>\n<li>Or you can add it to your .bash_profile file, this is typically located at: /usr</li>\n<li>In order to start your MySQL session, in terminal, run: mysql -h hostNameGoesHere -u usernameGoesHere -p </li>\n<li>You can start or stop your MySQL server from System Preferences. </li>\n<li>To access a specific database, you can run: mysql -h hostNameGoesHere -u usernameGoesHere -p databaseNameGoesHere</li>\n<li>In MySQL terms, Schemas and Databases are synonyms. </li>\n</ul>\n<h4>TypeORM</h4>\n<p>If you run into the following error when trying to connect to MySQL from TypeORM: </p>\n<p><code>Error: ER_NOT_SUPPORTED_AUTH_MODE: Client does not support authentication protocol requested by server; consider upgrading MySQL client</code> </p>\n<p>The reason this happens is explained in detail <a href=\"https://github.com/mysqljs/mysql/issues/1959\">here</a>, but in short, MySQL 8.0.4 introduced a new default authentication mechanism 'caching<em>sha2</em>pasword'. This is more secure than the previous method used by MySQL, which is 'mysql<em>native</em>password'. Now, TypeORM, under the hood, uses mysqljs. And work is being done in order to support this new authentication, however, as of writing, it has not been merged into master. As such, in order to get around this, on MySQL, you need to do the following: </p>\n<pre><code class=\"language-ALTER\">SELECT plugin FROM mysql.user WHERE User = 'root';```\n\n\nThereafter, you need to run: \n\n1. FLUSH PRIVILEGES;\n2. quit\n3. Stop MySQL server.\n4. Start MySQL server. \n\n\nYou should not be able to run TypeORM again and hopefully it will connect. If not, you may find some guidance by reviewing the following: \n\n\n* [TypeORM issue](https://github.com/typeorm/typeorm/issues/2093)\n* [mysqljs issue](https://github.com/mysqljs/mysql/issues/1507)\n* [mysqljs PR](https://github.com/mysqljs/mysql/pull/1962)\n* [mysqljs issue](https://github.com/mysqljs/mysql/issues/1959)\n* [MySQL documentation](https://dev.mysql.com/doc/refman/8.0/en/caching-sha2-pluggable-authentication.html)\n</code></pre>","frontmatter":{"title":"MySQL and TypeORM."}}},"pageContext":{"slug":"/til0054/"}}