{"data":{"markdownRemark":{"html":"<p><a href=\"https://flask-restplus.readthedocs.io/en/stable/index.html\">Flask-RESTplus</a> comes with built-in Swagger integration. It is however, not entirely obvious how to specify what Authorisation is required via the Swagger UI (at least it was not to me). </p>\n<p>If we assume that we have already setup our routes, Swagger and authorisation logic setup. What we now want to do is represent in the Swagger UI that this route requires authorisation via a JSON Web Token (JWT) passed in an Authorisation header. In order to set this up, you would do as follows:</p>\n<pre><code>...\nRESTAURANT = api.model(...)\n...\n\n# api is our namespace\nparser = api.parser()\nparser.add_argument(\"Authorisation\", location=\"headers\", help=\"Bearer token required\")\n...\n\n@api.route(\"/\")\nclass RestaurantList(Resource):\n    def get(self):\n        \"\"\"List all restaurants\"\"\"\n        return get_restaurants(), 200\n\n    @api.expect(parser, RESTAURANT, validate=True)\n    @api.response(201, \"Restaurant was added!\")\n    @api.response(400, \"Invalid payload\")\n    @api.response(401, \"Unauthorised\")\n    @api.response(403, \"Forbidden\")\n    @requires_auth(\"create:restaurant\")\n    def post(self, payload):\n        \"\"\"Create Restaurant\"\"\"\n        ...\n\n@api.route(\"/&#x3C;int:restaurant_id>\")\nclass Restaurants(Resource):\n    ...\n\n    @api.expect(parser)\n    @requires_auth(\"delete:restaurant)\n    def delete(self, payload, wakepark_id):\n        \"\"\"Deletes a single restaurant\"\"\"\n        ...\n</code></pre>\n<p>In the above code, once your imports, namespace and models are setup, you need to define a parser and then use <a href=\"https://flask-restplus.readthedocs.io/en/stable/parsing.html\">add_argument</a> to add the field necessary, the location in which the field should appear as well as some \"help\" text to describe it. </p>\n<p>You then add your parser, along with your model and your validate flag in the @expect decorator. This will add the necessary Authorisation header field to the Swagger UI and will enable you to add your JSON Web Token to the request when making a POST request via the Swagger UI. </p>","frontmatter":{"title":"Flask-RESTplus Authorisation Headers."}}},"pageContext":{"slug":"/til0150/"}}